

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Operability Mapping of Solid Oxide Electrolyzer Cell systems Using the IDAES and Opyrability Toolkit &#8212; Opyrability&#39;s documentation.</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples_gallery/idaes_connection';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/opyrability_logo.png" class="logo__image only-light" alt="Opyrability's documentation. - Home"/>
    <script>document.write(`<img src="../_static/opyrability_logo.png" class="logo__image only-dark" alt="Opyrability's documentation. - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Opyrability Documentation  
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>


<li class="toctree-l1"><a class="reference internal" href="../operability_overview.html">Process Operability Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms.html">Process Operability Algorithms</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../_autosummary/opyrability.html">opyrability</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../process_model.html">The Process Model (M) - Programming Aspects</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_example_gallery.html">Examples Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/CODES-group/opyrability/main?urlpath=tree/docs/examples_gallery/idaes_connection.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/CODES-group/opyrability/blob/main/docs/examples_gallery/idaes_connection.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/CODES-group/opyrability" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/CODES-group/opyrability/issues/new?title=Issue%20on%20page%20%2Fexamples_gallery/idaes_connection.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/examples_gallery/idaes_connection.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Operability Mapping of Solid Oxide Electrolyzer Cell systems Using the IDAES and Opyrability Toolkit</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Operability Mapping of Solid Oxide Electrolyzer Cell systems Using the IDAES and Opyrability Toolkit</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#overview-of-the-soec-model">Overview of the SOEC Model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#software-and-library-requirements">Software and Library Requirements</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step-integration">Step-by-Step Integration</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#case1-forward-mapping">Case1: Forward Mapping</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#constants-and-expressions">Constants and expressions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-model-for-operability-analysis">3. Define the Model for Operability Analysis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-input-space-for-operability-analysis">4. Define Input Space for Operability Analysis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#perform-mapping-from-ais-to-aos-and-plot-according-to-shape">5. Perform Mapping from AIS to AOS and Plot according to shape</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matplotlib-widget">Matplotlib widget</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#case-2-forward-mapping">Case 2 : Forward Mapping</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-desired-output-set-bounds">Setup Desired Output Set Bounds</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#desired-output-set-and-operability-index-evaluation-for-soec-based-hydrogen-production">Desired Output Set and Operability Index Evaluation for SOEC-Based Hydrogen Production</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#desired-output-set-dos">Desired Output Set (DOS)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="operability-mapping-of-solid-oxide-electrolyzer-cell-systems-using-the-idaes-and-opyrability-toolkit">
<h1>Operability Mapping of Solid Oxide Electrolyzer Cell systems Using the IDAES and Opyrability Toolkit<a class="headerlink" href="#operability-mapping-of-solid-oxide-electrolyzer-cell-systems-using-the-idaes-and-opyrability-toolkit" title="Permalink to this heading">#</a></h1>
<p>Author: Krishna Murthy Busam, West Virginia University PhD Student</p>
<p>This notebook demonstrates how to connect a Solid Oxide Electrolyzer Cell (SOEC) simulation model built with the IDAES platform to Python for operability analysis using the opyrability library. The approach focuses on visualizing the impact of varying current density and temperature on the SOEC voltage, which is crucial for optimizing stack performance and evaluating system flexibility.</p>
<p>This method serves as a general template for connecting Python-based process models with operability analysis tools. It can be extended to surrogate models, real-time simulations, or hybrid modeling workflows.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="overview-of-the-soec-model">
<h1>Overview of the SOEC Model<a class="headerlink" href="#overview-of-the-soec-model" title="Permalink to this heading">#</a></h1>
<p><img alt="" src="../_images/H_SOEC.png" />
Figure : Schematic of the operational principles governing SOEC.</p>
<p>The IDAES-based SOEC model represents a simplified electrochemical block focused on design-point evaluation. It computes cell voltage based on user-specified values of:
<strong>1.Current Density [A/cm²]</strong><br />
<strong>2.Operating Temperature [K]</strong></p>
<p>Operability study includes 2 cases which are stated below in the table. The electrochemical model includes reversible, activation and ohmic overpotentials and returns a computed cell voltage. This helps assess performance across a design space and guides the sizing and efficiency strategies of the SOEC system.</p>
<p><strong>Case 1</strong>: <span class="math notranslate nohighlight">\(\mathbb{R}^2 \rightarrow \mathbb{R}^1\)</span>(Input <span class="math notranslate nohighlight">\(\rightarrow\)</span> Output) system</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Input (Available Input Set)</p></th>
<th class="head"><p>Output (Achievable Output Set)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Current Density (J) [A/cm²]</p></td>
<td><p>Cell Voltage [V]</p></td>
</tr>
<tr class="row-odd"><td><p>Temperature (T) [K]</p></td>
<td><p>-</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Case 2</strong>: <span class="math notranslate nohighlight">\(\mathbb{R}^2 \rightarrow \mathbb{R}^2\)</span> (Input <span class="math notranslate nohighlight">\(\rightarrow\)</span> Output) system</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Input (Available Input Set)</p></th>
<th class="head"><p>Output (Achievable Output Set)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Current Density (J) [A/cm²]</p></td>
<td><p>Cell Voltage [V]</p></td>
</tr>
<tr class="row-odd"><td><p>Temperature (T) [K]</p></td>
<td><p>Hydrogen Production [gm/sec]</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="software-and-library-requirements">
<h1>Software and Library Requirements<a class="headerlink" href="#software-and-library-requirements" title="Permalink to this heading">#</a></h1>
<p>The following tools and libraries are required to execute the operability analysis of the SOEC model using the IDAES platform and the <code class="docutils literal notranslate"><span class="pre">opyrability</span></code> framework:</p>
<ul class="simple">
<li><p><strong>Python</strong> version 3.8 or higher</p></li>
<li><p><strong>IDAES Framework</strong> (<a class="reference external" href="https://idaes.org/">idaes.org</a>)</p></li>
<li><p><strong>opyrability</strong> library for operability analysis (<a class="reference external" href="https://codes-group.github.io/opyrability/intro.html">Opyrability package</a>)</p></li>
<li><p><strong>IPOPT</strong> solver for nonlinear optimization (<a class="reference external" href="https://coin-or.github.io/Ipopt/">IPOPT</a>)</p></li>
<li><p>Python packages:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> – numerical operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> – visualization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyomo</span></code> – algebraic modeling language</p></li>
</ul>
</li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="step-by-step-integration">
<h1>Step-by-Step Integration<a class="headerlink" href="#step-by-step-integration" title="Permalink to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="case1-forward-mapping">
<h1>Case1: Forward Mapping<a class="headerlink" href="#case1-forward-mapping" title="Permalink to this heading">#</a></h1>
<p><span class="math notranslate nohighlight">\(\mathbb{R}^2 \rightarrow \mathbb{R}^1\)</span> (Input <span class="math notranslate nohighlight">\(\rightarrow\)</span> Output) system</p>
<p><strong>1. Model Setup</strong></p>
<p>The SOEC model is defined using Pyomo and IDAES to create a voltage calculation block based on electrochemical principles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyomo.environ</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConcreteModel</span><span class="p">,</span> <span class="n">Var</span><span class="p">,</span> <span class="n">Expression</span><span class="p">,</span> <span class="n">Constraint</span><span class="p">,</span> <span class="n">SolverFactory</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">asinh</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">idaes.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlowsheetBlock</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">opyrability</span><span class="w"> </span><span class="kn">import</span> <span class="n">AIS2AOS_map</span>
</pre></div>
</div>
</div>
</div>
<p><strong>2. Build the IDAES SOEC Model</strong></p>
<p>The model calculates cell voltage as a function of temperature and current density using expressions for reversible potential, activation overpotential, and ohmic loss.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">ConcreteModel</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span> <span class="o">=</span> <span class="n">FlowsheetBlock</span><span class="p">(</span><span class="n">dynamic</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Variables</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">))</span>  <span class="c1"># A/cm^2</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">923</span><span class="p">,</span> <span class="mi">1173</span><span class="p">))</span>   <span class="c1"># K</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">V</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">1.3</span><span class="p">)</span>  <span class="c1"># V</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="constants-and-expressions">
<h1>Constants and expressions<a class="headerlink" href="#constants-and-expressions" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Constants</span>
<span class="n">R</span> <span class="o">=</span> <span class="mf">8.314</span> <span class="c1"># J/(mol·K)</span>
<span class="n">F</span> <span class="o">=</span> <span class="mf">96485.33212331059</span> <span class="c1"># C/mol</span>
<span class="n">gam_a</span> <span class="o">=</span> <span class="mf">1.651e5</span> <span class="c1"># A/cm^2</span>
<span class="n">gam_c</span> <span class="o">=</span> <span class="mf">2.344e6</span> <span class="c1"># A/cm^2</span>
<span class="n">E_act_a</span> <span class="o">=</span> <span class="mf">1.2e5</span> <span class="c1"># J/mol</span>
<span class="n">E_act_c</span> <span class="o">=</span> <span class="mf">1.2e5</span> <span class="c1"># J/mol</span>
<span class="n">L</span> <span class="o">=</span> <span class="mf">400e-4</span> <span class="c1">#m</span>

<span class="c1"># --------Electrochemical Equations--------#</span>

<span class="c1"># Open circuit voltage equation</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">E0</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="mf">1.2535</span> <span class="o">-</span> <span class="mf">0.00024516</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>

<span class="c1">#Activation overpotential equations</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_a</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">gam_a</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">E_act_a</span> <span class="o">/</span> <span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_c</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">gam_c</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">E_act_c</span> <span class="o">/</span> <span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_a</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span> <span class="o">/</span> <span class="n">F</span><span class="p">)</span> <span class="o">*</span> <span class="n">asinh</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_a</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_c</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span> <span class="o">/</span> <span class="n">F</span><span class="p">)</span> <span class="o">*</span> <span class="n">asinh</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_c</span><span class="p">)))</span>

<span class="c1"># Ohmic overpotential equations</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">phi</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="mf">70.9e-6</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="mi">10300</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_ohmic</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">*</span> <span class="n">L</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">phi</span><span class="p">)</span>

<span class="c1"># Voltage equation</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">voltage_eqn</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">V</span> <span class="o">==</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">E0</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_a</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_c</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_ohmic</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Solve the model using IPOPT or any other optimization solver</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solver</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;ipopt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="define-the-model-for-operability-analysis">
<h1>3. Define the Model for Operability Analysis<a class="headerlink" href="#define-the-model-for-operability-analysis" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Input-output mapping</span>
<span class="k">def</span><span class="w"> </span><span class="nf">SOEC_IDAES</span><span class="p">(</span><span class="n">u</span><span class="p">):</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">value</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">V</span><span class="p">)])</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="define-input-space-for-operability-analysis">
<h1>4. Define Input Space for Operability Analysis<a class="headerlink" href="#define-input-space-for-operability-analysis" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AIS_bounds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">923.0</span><span class="p">,</span> <span class="mf">1173.0</span><span class="p">]])</span>  <span class="c1"># [current density, temperature]</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="perform-mapping-from-ais-to-aos-and-plot-according-to-shape">
<h1>5. Perform Mapping from AIS to AOS and Plot according to shape<a class="headerlink" href="#perform-mapping-from-ais-to-aos-and-plot-according-to-shape" title="Permalink to this heading">#</a></h1>
<section id="matplotlib-widget">
<h2>Matplotlib widget<a class="headerlink" href="#matplotlib-widget" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Installation: pip install ipympl</p></li>
<li><p>In your Jupyter Notebook, activate the interactive widget backend by using: %matplotlib widget</p></li>
<li><p>You’ll now be able to: Zoom in/out, Pan around, Resize the plot dynamically, and Hover to see coordinates</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AIS</span><span class="p">,</span> <span class="n">AOS</span> <span class="o">=</span>  <span class="n">AIS2AOS_map</span><span class="p">(</span><span class="n">SOEC_IDAES</span><span class="p">,</span> <span class="n">AIS_bounds</span><span class="p">,</span>  <span class="n">resolution</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="c1"># Plotting</span>
<span class="n">AIS_new</span> <span class="o">=</span> <span class="n">AIS</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">resolution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">resolution</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AOS_new</span> <span class="o">=</span> <span class="n">AOS</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">resolution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">resolution</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="o">%</span><span class="k">matplotlib</span> widget
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figaspect</span><span class="p">(</span><span class="mf">0.4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature [K]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Current Density [A/$cm^2$]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">&#39;Voltage [V]&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">AIS_new</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">AIS_new</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">AOS_new</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">AOS_new</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span>
                        <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span> <span class="n">antialiased</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>preallocation completed
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;mpl_toolkits.mplot3d.art3d.Path3DCollection at 0x14c0c5eca30&gt;
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "3c7cc127befc404b80d953bd9faea4f0", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="case-2-forward-mapping">
<h1>Case 2 : Forward Mapping<a class="headerlink" href="#case-2-forward-mapping" title="Permalink to this heading">#</a></h1>
<p><span class="math notranslate nohighlight">\(\mathbb{R}^2 \rightarrow \mathbb{R}^2\)</span> (Input <span class="math notranslate nohighlight">\(\rightarrow\)</span> Output) system</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Input (Available Input Set)</p></th>
<th class="head"><p>Output (Achievable Output Set)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Current Density (J) [A/cm²]</p></td>
<td><p>Cell Voltage [V]</p></td>
</tr>
<tr class="row-odd"><td><p>Temperature (T) [K]</p></td>
<td><p>Hydrogen Production [gm/sec]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyomo.environ</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConcreteModel</span><span class="p">,</span> <span class="n">Var</span><span class="p">,</span> <span class="n">Expression</span><span class="p">,</span> <span class="n">Constraint</span><span class="p">,</span> <span class="n">SolverFactory</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">asinh</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">idaes.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">FlowsheetBlock</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">opyrability</span><span class="w"> </span><span class="kn">import</span> <span class="n">AIS2AOS_map</span>

<span class="c1"># --- 1. Model setup ---</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">ConcreteModel</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span> <span class="o">=</span> <span class="n">FlowsheetBlock</span><span class="p">(</span><span class="n">dynamic</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Inputs</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Current density [A/cm^2]&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">923</span><span class="p">,</span> <span class="mi">1173</span><span class="p">),</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Temperature [K]&quot;</span><span class="p">)</span>

<span class="c1"># Outputs</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">V</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Voltage [V]&quot;</span><span class="p">)</span>

<span class="c1"># Constants</span>
<span class="n">R</span> <span class="o">=</span> <span class="mf">8.314</span>  <span class="c1"># J/mol-K</span>
<span class="n">F</span> <span class="o">=</span> <span class="mf">96485.33212331059</span>  <span class="c1"># C/mol</span>
<span class="n">gam_a</span> <span class="o">=</span> <span class="mf">1.651e5</span> <span class="c1"># A/cm^2</span>
<span class="n">gam_c</span> <span class="o">=</span> <span class="mf">2.344e6</span> <span class="c1"># A/cm^2</span>
<span class="n">E_act_a</span> <span class="o">=</span> <span class="mf">1.2e5</span> <span class="c1"># J/mol</span>
<span class="n">E_act_c</span> <span class="o">=</span> <span class="mf">1.2e5</span> <span class="c1">#J/mol</span>
<span class="n">L</span> <span class="o">=</span> <span class="mf">400e-4</span>  <span class="c1"># m</span>
<span class="n">A_cell</span> <span class="o">=</span> <span class="mf">5.0</span>  <span class="c1"># cm^2</span>

<span class="c1"># --- Electrochemical equations ---</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_a</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">gam_a</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">E_act_a</span> <span class="o">/</span> <span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_c</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">gam_c</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">E_act_c</span> <span class="o">/</span> <span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">E0</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="mf">1.2535</span> <span class="o">-</span> <span class="mf">0.00024516</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_a</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span> <span class="o">/</span> <span class="n">F</span><span class="p">)</span> <span class="o">*</span> <span class="n">asinh</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_a</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_c</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span> <span class="o">/</span> <span class="n">F</span><span class="p">)</span> <span class="o">*</span> <span class="n">asinh</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J0_c</span><span class="p">)))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">phi</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="mf">70.9e-6</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="mi">10300</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_ohmic</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">*</span> <span class="n">L</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">phi</span><span class="p">)</span>

<span class="c1"># Total voltage equation</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">voltage_eqn</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">V</span> <span class="o">==</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">E0</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_a</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_act_c</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">eta_ohmic</span><span class="p">)</span>

<span class="c1"># Hydrogen production rate [Nm^3/hr]</span>
<span class="c1"># mol/s = (J [A/cm^2] * Area [cm^2]) / (2 * F)</span>
<span class="c1"># Nm3/hr = mol/s * 22.4 (L/mol) / 1000 * 3600</span>
<span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">H2_prod</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span> <span class="o">*</span> <span class="n">A_cell</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">F</span><span class="p">)</span> <span class="o">*</span> <span class="mf">22.4</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">3600</span><span class="p">)</span>

<span class="c1"># --- Solver ---</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;ipopt&#39;</span><span class="p">)</span>

<span class="c1"># --- Input-output mapping function ---</span>
<span class="k">def</span><span class="w"> </span><span class="nf">SOEC_IDAES_2out</span><span class="p">(</span><span class="n">u</span><span class="p">):</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">J</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">value</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">V</span><span class="p">),</span> <span class="n">value</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">H2_prod</span><span class="p">)])</span>  <span class="c1"># V, H2 rate</span>
</pre></div>
</div>
</div>
</div>
<section id="setup-desired-output-set-bounds">
<h2>Setup Desired Output Set Bounds<a class="headerlink" href="#setup-desired-output-set-bounds" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">opyrability</span><span class="w"> </span><span class="kn">import</span> <span class="n">AIS2AOS_map</span>

<span class="c1">#AIS Current Density (J) and Temperature (K)</span>
<span class="n">AIS_bounds</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">],</span>
                        <span class="p">[</span><span class="mf">923.0</span><span class="p">,</span> <span class="mf">1073.0</span><span class="p">]])</span>

<span class="n">AIS_resolution</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
 
<span class="n">model</span> <span class="o">=</span>  <span class="n">SOEC_IDAES_2out</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AIS</span><span class="p">,</span> <span class="n">AOS</span> <span class="o">=</span>  <span class="n">AIS2AOS_map</span><span class="p">(</span><span class="n">SOEC_IDAES_2out</span><span class="p">,</span> <span class="n">AIS_bounds</span><span class="p">,</span>  <span class="n">AIS_resolution</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>preallocation completed
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "b992804f0fbd40eeb5c6aad4f9781911", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>Additionally, we can create a visualization of the Achievable Output Space (AOS) by using the <code class="docutils literal notranslate"><span class="pre">multimodel_rep</span></code> function from opyrability, which takes about the same amount of time as the <code class="docutils literal notranslate"><span class="pre">AIS2AOS_map</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">opyrability</span><span class="w"> </span><span class="kn">import</span> <span class="n">multimodel_rep</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">AOS_region</span>  <span class="o">=</span>  <span class="n">multimodel_rep</span><span class="p">(</span><span class="n">SOEC_IDAES_2out</span><span class="p">,</span> <span class="n">AIS_bounds</span><span class="p">,</span> <span class="n">resolution</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>preallocation completed
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8853622b2655474e90454a492182ded3", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="desired-output-set-and-operability-index-evaluation-for-soec-based-hydrogen-production">
<h2>Desired Output Set and Operability Index Evaluation for SOEC-Based Hydrogen Production<a class="headerlink" href="#desired-output-set-and-operability-index-evaluation-for-soec-based-hydrogen-production" title="Permalink to this heading">#</a></h2>
<p>Now that the Achievable Output Space (AOS) has been established for the SOEC process, we can define various Desired Output Set (DOS) to reflect target operating regions based on system-level performance goals. The <strong>Operability Index (OI)</strong> is then used to quantify how much of each DOS is actually achievable by the process, given the Available Input Set (AIS). The OI is defined as the fraction of the DOS that overlaps with the AOS.</p>
<p>For this SOEC case study, the two outputs of interest are:</p>
<ul class="simple">
<li><p><strong>Cell Voltage [V]</strong></p></li>
<li><p><strong>Hydrogen Production Rate [g/s]</strong></p></li>
</ul>
<p>We define two scenarios for the DOS, representing hydrogen production targets within an acceptable voltage range. These ranges reflect practical operating targets for high-efficiency hydrogen production while maintaining cell voltage within a realistic range for stable SOEC operation.</p>
<section id="desired-output-set-dos">
<h3>Desired Output Set (DOS)<a class="headerlink" href="#desired-output-set-dos" title="Permalink to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Case</p></th>
<th class="head"><p>Voltage Range (V)</p></th>
<th class="head"><p>Hydrogen Production Rate (g/s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DOS 1</p></td>
<td><p>1.1 – 1.5</p></td>
<td><p>0.0001 – 0.0005</p></td>
</tr>
<tr class="row-odd"><td><p>DOS 2</p></td>
<td><p>1.1 – 1.5</p></td>
<td><p>0.0015 – 0.0020</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">opyrability</span><span class="w"> </span><span class="kn">import</span> <span class="n">OI_eval</span>
<span class="n">DOS_bounds_1</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> 
                        <span class="p">[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">]])</span>
 
<span class="n">DOS_bounds_2</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> 
                        <span class="p">[</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">]])</span>

<span class="n">OI</span> <span class="o">=</span> <span class="n">OI_eval</span><span class="p">(</span><span class="n">AOS_region</span><span class="p">,</span> <span class="n">DOS_bounds_1</span><span class="p">)</span>

<span class="n">OI</span> <span class="o">=</span> <span class="n">OI_eval</span><span class="p">(</span><span class="n">AOS_region</span><span class="p">,</span> <span class="n">DOS_bounds_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "4bdc1922e7144ca0b50526d91e32814b", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "38eacca58d5949039f171f3afae6671c", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>These DOS scenarios can be used to evaluate how the operability of the SOEC system changes with tighter hydrogen production targets. A higher OI indicates that a greater portion of the desired operating region is achievable by the system, while a lower OI may suggest the need for design modifications, advanced control strategies, or broader input flexibility.</p>
<p>Desired Output Set (DOS) and their OI calculation</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Case</p></th>
<th class="head"><p>Voltage Range (V)</p></th>
<th class="head"><p>Hydrogen Production Rate (g/s)</p></th>
<th class="head"><p>OI (%)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DOS 1</p></td>
<td><p>1.1 – 1.5</p></td>
<td><p>0.0001 – 0.0005</p></td>
<td><p>16.25</p></td>
</tr>
<tr class="row-odd"><td><p>DOS 2</p></td>
<td><p>1.1 – 1.5</p></td>
<td><p>0.0015 – 0.0020</p></td>
<td><p>85.18</p></td>
</tr>
</tbody>
</table>
</div>
<p>Interpretation</p>
<ul class="simple">
<li><p><strong>DOS 1</strong> shows a low operability index (16.25%), indicating that only a small part of this low H₂ production range can be reached with the current SOEC setup.</p></li>
<li><p><strong>DOS 2</strong> is the most favorable target region, with an OI of 85.18%, meaning the system is well-suited to operate within this output range.</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "CODES-group/opyrability",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./examples_gallery"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Operability Mapping of Solid Oxide Electrolyzer Cell systems Using the IDAES and Opyrability Toolkit</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#overview-of-the-soec-model">Overview of the SOEC Model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#software-and-library-requirements">Software and Library Requirements</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step-integration">Step-by-Step Integration</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#case1-forward-mapping">Case1: Forward Mapping</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#constants-and-expressions">Constants and expressions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-the-model-for-operability-analysis">3. Define the Model for Operability Analysis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-input-space-for-operability-analysis">4. Define Input Space for Operability Analysis</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#perform-mapping-from-ais-to-aos-and-plot-according-to-shape">5. Perform Mapping from AIS to AOS and Plot according to shape</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matplotlib-widget">Matplotlib widget</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#case-2-forward-mapping">Case 2 : Forward Mapping</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-desired-output-set-bounds">Setup Desired Output Set Bounds</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#desired-output-set-and-operability-index-evaluation-for-soec-based-hydrogen-production">Desired Output Set and Operability Index Evaluation for SOEC-Based Hydrogen Production</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#desired-output-set-dos">Desired Output Set (DOS)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Victor Alves et al., Control, Optimization and Design for Energy and Sustainability (CODES) Group.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>